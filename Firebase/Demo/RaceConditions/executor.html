<html>

<head></head>

<body>
	<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-database.js"></script>
	<script src="../../fireHive.js" type="text/javascript"></script>
	<p id="arrayStatus" style="position: absolute;left: 50%;font-size: xx-large;"></p>
	<script>
		//hive init
		//To Do: i do not have a real way to know when hive is actually working and has all the data.

		window.onload = function () {
			let config = {
				apiKey: " AIzaSyA-Y_mz58xgvGkQNK_tQCXQiG3q1mlA6hM",
				authDomain: "hive-1336.firebaseapp.com",
				databaseURL: "https://hive-1336.firebaseio.com/",
				storageBucket: "hive-1336.appspot.com"
			};
			hive.start(config, function () {
				let status = document.getElementById("arrayStatus");
				window.localInfo = [];
				let shared= hive.get("RaceCondition");
				window.data = shared.data;
				window.toExecute = shared.toExecute;
				shared.count++;
				var executed = toExecute.length;
				localInfo.push("Started");
				setInterval(() => {
					if (executed < toExecute.length) {
						let code = toExecute[executed++];
						localInfo.push(eval(code));
					}
					status.innerText = JSON.stringify(localInfo, null, 8);
				}, 10);
			});
		}


	</script>
</body>

</html>