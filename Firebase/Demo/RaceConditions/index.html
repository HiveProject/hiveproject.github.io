<html>

<head></head>

<body>
	<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/3.6.2/firebase-database.js"></script>
	<script src="../../fireHive.js" type="text/javascript"></script>
	<p id="count" style="position: absolute;left: 50%;font-size: xx-large;"></p>
	<p id="arrayStatus" style="position: absolute;left: 50%;font-size: xx-large;"></p>
	<script>
		//hive init
		//To Do: i do not have a real way to know when hive is actually working and has all the data.

		window.onload = function () {
			let config = {
				apiKey: " AIzaSyA-Y_mz58xgvGkQNK_tQCXQiG3q1mlA6hM",
				authDomain: "hive-1336.firebaseapp.com",
				databaseURL: "https://hive-1336.firebaseio.com/",
				storageBucket: "hive-1336.appspot.com"
			};
			hive.start(config, function () {
				let status = document.getElementById("arrayStatus");
				let countText = document.getElementById("count");
				let shared = hive.set("RaceCondition", { data: [], toExecute: [], count: 0 });
				window.data = shared.data;
				let toExecute = shared.toExecute;
				setInterval(() => {

					status.innerText = shared.count + " Active users\n" + JSON.stringify(data, null, 8);
				}, 100);
				window.execute = function (code) { toExecute.push(code); };
			});
		}


	</script>
</body>

</html>